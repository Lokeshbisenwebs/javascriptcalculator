<html>
  <head>
    <link href="images/favicon2.png" rel="icon" />
    <link href="images/favicon2.png" rel="apple-touch-icon" />
    <link rel="stylesheet" type="text/css" href="style.css" />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:600,700"
      rel="stylesheet"
    />
    <title>Javascript Calculator</title>
    <script>
      function getHistory() {
    return document.getElementById("history-value");
  }
  function printHistory(num) {
    document.getElementById("history-value").innerText = num;
  }
  function getOutput() {
    return document.getElementById("output-value").innerText;
  }
  function printOutput(num) {
    document.getElementById("output-value").innerText = num;
  }
  var lst = ["%", "/", "+", "-", "*"];
  var f = false;
  var operator = document.getElementsByClassName("number");
  
  for (var i = 0; i < operator.length; i++) {
    operator[i].addEventListener("click", function () {
      if (this.id == "clear") {
        printHistory("");
        printOutput("");
      } else if (this.id == "backspace") {
        var output = getOutput();
        if (output) {
          //if output has a value
          output = output.substring(0, output.length - 1);
          //output = output;
          printOutput(output);
        }
      } else if (this.id == "=") {
        try {
          var output = getOutput();
  
          if (output == "NaN" || output == "" || f) {
            f = false;
            printOutput("");
            printHistory("");
          } else {
            var outpu = eval(output);
            // print(outpu);
            if (outpu == undefined) {
              outpu = "NaN";
              output = "";
            }
            f = true;
            printOutput(outpu);
            printHistory(output);
          }
        } catch (error) {
          outpu = "NaN";
          output = "";
          f = true;
          printOutput(outpu);
          printHistory(output);
        }
      } else {
        var output = getOutput().toString();
        //console.log(lst[1] == this.id);
        if (output.length == 0 && lst.includes(this.id)) {
          printOutput("");
          printHistory("");
          f = false;
        } else {
          if (f || output == "NaN") {
            if (!lst.includes(this.id)) {
              output = this.id;
              printHistory("");
            } else {
              output = output + this.id.toString();
            }
            f = false;
          } else {
            if (output.length > 0) output = output + this.id.toString();
            else output = this.id;
          }
          console.log(output);
  
          printOutput(output);
        }
      }
    });
  }
    </script>
  </head>

  <body>
    <div id="calculator">
      <div id="result">
        <div id="history">
          <p id="history-value"></p>
        </div>
        <div id="output">
          <p id="output-value"></p>
        </div>
      </div>
      <div id="keyboard">
        <button class="number" id="clear">C</button>
        <button class="number" id="backspace">D</button>
        <button class="number" id="%">%</button>
        <button class="number" id="/">&#247;</button>
        <button class="number" id="7">7</button>
        <button class="number" id="8">8</button>
        <button class="number" id="9">9</button>
        <button class="number" id="*">&times;</button>
        <button class="number" id="4">4</button>
        <button class="number" id="5">5</button>
        <button class="number" id="6">6</button>
        <button class="number" id="-">-</button>
        <button class="number" id="1">1</button>
        <button class="number" id="2">2</button>
        <button class="number" id="3">3</button>
        <button class="number" id="+">+</button>
        <button class="number" id="(">(</button>
        <button class="number" id=")">)</button>
        <button class="number" id="0">0</button>
        <button class="number" id="=">=</button>
        <!-- <button class="number" id="0">0</button> -->
        <button class="empty" id="empty"></button>
        <button class="number" id=".">.</button>
        <button class="empty" id="empty"></button>
      </div>
    </div>
    

    <script src="script.js"></script>
  </body>
</html>
